{% extends 'courses/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/exercises_list.css' %}">
{% endblock %}

{% block content %}

<!-- LOADER -->
<div id="loader">
    <div class="loader-circle"></div>
    <p>Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
</div>

<div class="container mt-5 content-area" style="opacity:0; transition:1s;">
    <h2 class="page-title">ğŸ“˜ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</h2>

    <!-- ÙÙ„ØªØ±Ø© -->
    <form method="get" class="filter-box fade-in">
        <label>ØµÙ†Ù Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†:</label>
        <select name="cat" onchange="this.form.submit()">
            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</option>
            {% for c in categories %}
                <option value="{{ c.id }}"
                    {% if request.GET.cat == c.id|stringformat:'s' %} selected {% endif %}
                >{{ c.name }}</option>
            {% endfor %}
        </select>
    </form>

    <!-- Ø¹Ø±Ø¶ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† -->
    <div class="pdf-grid">
        {% for doc in docs %}
        <div class="small-pdf-item">
            <span class="pdf-title">{{ doc.title }}</span>

            <a href="{{ doc.file.url }}" class="download-btn" download>
                ØªØ­Ù…ÙŠÙ„
            </a>
        </div>
        {% empty %}
        <p class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ…Ø§Ø±ÙŠÙ† Ù…ØªÙˆÙØ±Ø©.</p>
        {% endfor %}
    </div>

</div>

<script>
        document.addEventListener("DOMContentLoaded", function () {

            // Loader Animation
            setTimeout(() => {
                const loader = document.getElementById("loader");
                loader.style.opacity = "0";
                setTimeout(() => loader.style.display = "none", 400);
                document.querySelector(".content-area").style.opacity = "1";
            }, 800);


            // Fade-in Animation on Scroll
            const items = document.querySelectorAll(".small-pdf-item");

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("fade-in");
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.2 });

            items.forEach(item => observer.observe(item));
        });
        </script>

{% endblock %}
