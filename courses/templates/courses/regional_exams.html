{% extends 'courses/base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/exams_style.css' %}">
{% endblock %}

{% block content %}
<div id="loader">
  <div class="spinner"></div>
  <p>Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
</div>

<div class="container mt-5 content-area" style="opacity:0; transition:1s;">

    <h2 class="page-title">ğŸ“š Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø§Ù„Ø¬Ù‡ÙˆÙŠØ©</h2>

    <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ¦Ø© -->
    <form method="GET" class="filter-box fade-in">
        <label>Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©:</label>
        <select name="category"  onchange="this.form.submit()">
            {% for cat in categories %}
                <option value="{{ cat.id }}" {% if selected_category == cat.id|stringformat:'s' %}selected{% endif %}>
                    {{ cat.name }}
                </option>
            {% endfor %}
        </select>
    </form>

    <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙØ§Øª -->
    <div class="pdf-grid">
        {% for doc in docs %}
        <div class="small-pdf-item">
            <span class="pdf-title">{{ doc.title }}</span>
            <a href="{{ doc.file.url }}" class="download-btn" download>
                ØªØ­Ù…ÙŠÙ„
                <span class="badge bg-primary float-end">{{ doc.category.name }}</span>
            </a>
        </div>
        {% empty %}
            <p class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø¬Ù‡ÙˆÙŠØ© Ù…ØªÙˆÙØ±Ø©.</p>
        {% endfor %}
    </div>

</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {

        // Loader Animation
        setTimeout(() => {
            const loader = document.getElementById("loader");
            loader.style.opacity = "0";
            setTimeout(() => loader.style.display = "none", 400);
            document.querySelector(".content-area").style.opacity = "1";
        }, 800);


        // Fade-in Animation on Scroll
        const items = document.querySelectorAll(".small-pdf-item");

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("fade-in");
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.2 });

        items.forEach(item => observer.observe(item));
    });
</script>
{% endblock %}
